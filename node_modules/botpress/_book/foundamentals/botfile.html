
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Configuration Â· Botpress Official Documentation</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-noembed/style.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-hints/plugin-hints.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../deploy/heroku.html" />
    
    
    <link rel="prev" href="database.html" />
    

    </head>
    <body>
        
    
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Getting Started</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../starting/setup.html">
            
                <a href="../starting/setup.html">
            
                    
                    Installation and Bootstrap
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Foundamentals</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="structure.html">
            
                <a href="structure.html">
            
                    
                    Project Structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="events.html">
            
                <a href="events.html">
            
                    
                    Events
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.1" data-path="events.html">
            
                <a href="events.html#receive">
            
                    
                    Receiving Messages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.2" data-path="events.html">
            
                <a href="events.html#send">
            
                    
                    Sending Messages
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="conversations.html">
            
                <a href="conversations.html">
            
                    
                    Conversations
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.3.1" data-path="flow.html">
            
                <a href="flow.html">
            
                    
                    Flow Management (Convo)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.2" data-path="umm.html">
            
                <a href="umm.html">
            
                    
                    Content Management (UMM)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="database.html">
            
                <a href="database.html">
            
                    
                    Data Storage
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.4.1" data-path="database.html">
            
                <a href="database.html#kvs">
            
                    
                    Key-Value-Store
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="2.5" data-path="botfile.html">
            
                <a href="botfile.html">
            
                    
                    Configuration
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Deploying your bot</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../deploy/heroku.html">
            
                <a href="../deploy/heroku.html">
            
                    
                    Heroku
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../deploy/aws.html">
            
                <a href="../deploy/aws.html">
            
                    
                    AWS
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Advanced concepts</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../advanced/middleware.html">
            
                <a href="../advanced/middleware.html">
            
                    
                    Middleware Chains
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../advanced/database_helpers.html">
            
                <a href="../advanced/database_helpers.html">
            
                    
                    Database Helpers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../advanced/debug.html">
            
                <a href="../advanced/debug.html">
            
                    
                    Debugging your bot
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    

    
        
        <li class="header">Reference</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../reference/cli.html">
            
                <a href="../reference/cli.html">
            
                    
                    Command Line Interface (CLI)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.1" data-path="../reference/cli.html">
            
                <a href="../reference/cli.html#init">
            
                    
                    init
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.2" data-path="../reference/cli.html">
            
                <a href="../reference/cli.html#list">
            
                    
                    list
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3" data-path="../reference/cli.html">
            
                <a href="../reference/cli.html#install">
            
                    
                    install
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.4" data-path="../reference/cli.html">
            
                <a href="../reference/cli.html#uninstall">
            
                    
                    uninstall
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.5" data-path="../reference/cli.html">
            
                <a href="../reference/cli.html#create">
            
                    
                    create
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.6" data-path="../reference/cli.html">
            
                <a href="../reference/cli.html#version">
            
                    
                    version
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    

    
        
        <li class="header">Module Development</li>
        
        
    
        <li class="chapter " data-level="8.1" data-path="../modules/how.html">
            
                <a href="../modules/how.html">
            
                    
                    How to create a module
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1.1" data-path="../modules/events.html">
            
                <a href="../modules/events.html">
            
                    
                    Events
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.1.2" data-path="../modules/api.html">
            
                <a href="../modules/api.html">
            
                    
                    Exposing an API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.1.3" data-path="../modules/config.html">
            
                <a href="../modules/config.html">
            
                    
                    Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.1.4" data-path="../modules/icon.html">
            
                <a href="../modules/icon.html">
            
                    
                    Module Icon
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Configuration</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="configuration"><a name="configuration" class="plugin-anchor" href="#configuration"><i class="fa fa-link" aria-hidden="true"></i></a>Configuration</h1>
<h2 id="the-botfile"><a name="the-botfile" class="plugin-anchor" href="#the-botfile"><i class="fa fa-link" aria-hidden="true"></i></a>The Botfile</h2>
<p>The <strong>botfile.js</strong> is located at the root of a bot project and contains all the configuration required by Botpress to operate.</p>
<p>Here&apos;s an overview of the variables and what they do:</p>
<ul>
<li><code>dataDir</code>: The data directory where all your bot&apos;s data will be saved, including the built-in database file and the modules data.</li>
<li><code>modulesConfigDir</code>: The modules configuration directory. Configuration is separate from regular data (<code>dataDir</code>) because you might want to checkin configuration to source-control.</li>
<li><code>disableFileLogs</code>: Setting to true will disable persisting logs to file system.</li>
<li><code>notification.file</code>: The name of the files where notifications are persisted NOTE: <em>(will be moved to the database in an upcoming version)</em></li>
<li><code>notification.maxLength</code>: The maximum number of notifications to persist</li>
<li><code>log.file</code>: The name of the log files</li>
<li><code>log.maxSize</code>: The maximum size of log files</li>
<li><code>login.enabled</code>: If login is required</li>
<li><code>login.tokenExpiry</code>: The lifetime of an authentication token, after which clients will need to re-authenticate</li>
<li><code>login.password</code>: The password required to login. NOTE: the username is always <code>admin</code> (at time of writing)</li>
<li><code>login.maxAttempts</code>: The maximum amount of login attempts in the <code>login.resetAfter</code> time</li>
<li><code>login.resetAfter</code>: Resets login attempts after this time</li>
<li><code>config</code> custom module configuration (see <a href="#modules">Config Modules</a>)</li>
</ul>
<h2 id="accessing-configuration"><a name="accessing-configuration" class="plugin-anchor" href="#accessing-configuration"><i class="fa fa-link" aria-hidden="true"></i></a>Accessing configuration</h2>
<p>The configuration can be accessed programmatically directly in the <code>bp.botfile</code> object. For example, you may check if login is enabled by looking at <code>bp.botfile.login.enabled</code>.</p>
<h2 id="customization"><a name="customization" class="plugin-anchor" href="#customization"><i class="fa fa-link" aria-hidden="true"></i></a>Customization</h2>
<p>Since the botfile is a regular commonjs module, arbitrary code can be run in the botfile in order to compute the required fields. The exported value must always be the final configuration object and should be synchronous. You should never mutate the configuration at run time.</p>
<h2 id="modules"><a name="modules" class="plugin-anchor" href="#modules"><i class="fa fa-link" aria-hidden="true"></i></a>Configuring Modules </h2>
<p>You can hardcode modules configuration in your Botfile. The configuration from the botfile takes precedence over the database configuration.</p>
<p>The order of precedence is:</p>
<ul>
<li>Environment Variables (Most important)</li>
<li>Botfile Configuration</li>
<li>Database Configuration</li>
<li>Default Values (Least important)</li>
</ul>
<p><div class="alert alert-info hints-alert"><div class="hints-icon"><i class="fa fa-info-circle"></i></div><div class="hints-container"><p><strong>TIP:</strong> The best way of figuring out the variable names and environement variables is currently to read the <code>index.js</code> file of the modules and look for the configuration setup.</p>
</div></div></p>
<h3 id="example"><a name="example" class="plugin-anchor" href="#example"><i class="fa fa-link" aria-hidden="true"></i></a>Example</h3>
<pre><code class="lang-js">{
  <span class="hljs-comment">// rest of botfile...</span>
  config: {
    <span class="hljs-string">&apos;botpress-slack&apos;</span>: {
      apiToken: <span class="hljs-string">&apos;&lt;&lt;YOUR_TOKEN&gt;&gt;&apos;</span>,
      botToken: <span class="hljs-string">&apos;&lt;&lt;BOT_TOKEN&gt;&gt;&apos;</span>, <span class="hljs-comment">// etc...</span>
    }
  }
}
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="database.html#kvs" class="navigation navigation-prev " aria-label="Previous page: Key-Value-Store">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../deploy/heroku.html" class="navigation navigation-next " aria-label="Next page: Heroku">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Configuration","level":"2.5","depth":1,"next":{"title":"Heroku","level":"3.1","depth":1,"path":"deploy/heroku.md","ref":"./deploy/heroku.md","articles":[]},"previous":{"title":"Key-Value-Store","level":"2.4.1","depth":2,"anchor":"#kvs","path":"foundamentals/database.md","ref":"./foundamentals/database.md#kvs","articles":[]},"dir":"ltr"},"config":{"plugins":["noembed","sitemap","expandable-chapters","hints","anchors","robotstxt"],"root":"./docs","styles":{"website":"./_layouts/website/style.css"},"pluginsConfig":{"robotstxt":{},"search":{},"hints":{"danger":"fa fa-exclamation-circle","info":"fa fa-info-circle","tip":"fa fa-mortar-board","working":"fa fa-wrench"},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"sitemap":{"hostname":"https://docs.botpress.io/"},"noembed":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{},"expandable-chapters":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{"version":"1.0.5","assets":"https://raw.githubusercontent.com/botpress/botpress/next/assets"},"title":"Botpress Official Documentation","gitbook":">= 3.0.0"},"file":{"path":"foundamentals/botfile.md","mtime":"2017-06-04T15:40:53.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-06-09T15:03:30.456Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>


    <script>
        window.onload = function() {
          require(['gitbook', 'jQuery'], function(gitbook, $) {
            function removeGitbook() {
              var link = $('.gitbook-link').parent();
              link.prev().remove();
              link.remove();
            }
            removeGitbook();
            gitbook.events.bind('page.change', removeGitbook);

            var link = document.createElement('link')
            link.setAttribute('rel', 'stylesheet')
            link.setAttribute('type', 'text/css')
            link.setAttribute('href', 'https://cdn.rawgit.com/botpress/botpress/next/docs/_layouts/website/style.css')
            document.getElementsByTagName('head')[0].appendChild(link)
          })
        };
    </script>


        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-noembed/scripts.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

